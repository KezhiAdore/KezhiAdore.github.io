<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon_xiaomai/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_xiaomai/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon_xiaomai/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon_xiaomai/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/green/pace-theme-flash.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"kezhi.tech","root":"/","images":"/images","scheme":"Gemini","darkmode":"auto","version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInLeft"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="This is an automatically translated post by LLM. The original post is in Chinese. If you find any translation errors, please leave a comment to help me improve the translation. Thanks!  High-pass">
<meta property="og:type" content="article">
<meta property="og:title" content="Spatial High-pass Filters.">
<meta property="og:url" content="https://kezhi.tech/en/bbc72bae.html">
<meta property="og:site_name" content="Kezhi&#39;s Blog">
<meta property="og:description" content="This is an automatically translated post by LLM. The original post is in Chinese. If you find any translation errors, please leave a comment to help me improve the translation. Thanks!  High-pass">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141032.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141251.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141327.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141032.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330143516.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330143622.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330143708.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330144324.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330144413.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200327172117.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200327172117.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141032.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330145641.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330145657.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330144413.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330150103.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330141032.bmp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330151754.png?x-oss-process=style/webp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330151852.png?x-oss-process=style/webp">
<meta property="og:image" content="https://download.kezhi.tech/img/20200330151924.png?x-oss-process=style/webp">
<meta property="article:published_time" content="2020-03-30T07:27:33.000Z">
<meta property="article:modified_time" content="2024-04-20T12:30:12.857Z">
<meta property="article:author" content="Yu Zhao">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="数字图像">
<meta property="article:tag" content="图像处理">
<meta property="article:tag" content="空域滤波器">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://download.kezhi.tech/img/20200330141032.bmp">


<link rel="canonical" href="https://kezhi.tech/en/bbc72bae.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://kezhi.tech/en/bbc72bae.html","path":"en/bbc72bae.html","title":"Spatial High-pass Filters."}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Spatial High-pass Filters. | Kezhi's Blog</title>
  







<link rel="dns-prefetch" href="https://server.kezhi.tech:8361/">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Kezhi's Blog" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Kezhi's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">106</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">127</span></a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-book fa-fw"></i>Guestbook</a></li><li class="menu-item menu-item-gallery"><a href="/gallery/" rel="section"><i class="fa fa-camera fa-fw"></i>Gallery</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>Links</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>rss</a></li><li class="menu-item menu-item-anime"><a href="/banguanimemis/" rel="section"><i class="fa fa-tv fa-fw"></i>anime</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#unsharp-mask"><span class="nav-text">Unsharp Mask</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sobel-operator"><span class="nav-text">Sobel Operator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#laplacian-operator"><span class="nav-text">Laplacian Operator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#canny-algorithm"><span class="nav-text">Canny Algorithm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#appendix"><span class="nav-text">Appendix</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#references"><span class="nav-text">References</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#source-code"><span class="nav-text">Source Code</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yu Zhao"
      src="/images/%E5%B0%8F%E5%9F%8B.jpg">
  <p class="site-author-name" itemprop="name">Yu Zhao</p>
  <div class="site-description" itemprop="description">知识因被记录而产生价值</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">127</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">106</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/KezhiAdore" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;KezhiAdore" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yuzhao@163.com" title="E-Mail → mailto:yuzhao@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
      
      
      
      
      <div style="">
  <canvas id="canvas" style="width:60%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //声明canvas的宽高
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //存储时间数据
    var data = [];
    //存储运动的小球
    var balls = [];
    //设置粒子半径
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //存储时间数字，由十位小时、个位小时、冒号、十位分钟、个位分钟、冒号、十位秒钟、个位秒钟这7个数字组成
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*生成点阵数字*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*更新时钟*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //时间发生变化
            if(NewData[i] !== data[i]){
                //将变化的数字值和在data数组中的索引存储在changeNumArray数组中
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //增加小球
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*更新小球状态*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*增加要运动的小球*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*渲染*/
    function render(){
        //重置画布宽度，达到清空画布的效果
        canvas.height = 100;
        //渲染时钟
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //渲染小球
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //更新时钟
        updateDigitTime();
        //更新小球状态
        updateBalls();
        //渲染
        render();
    },50);
}

})();
</script>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://gwyxjtu.github.io/" title="https:&#x2F;&#x2F;gwyxjtu.github.io&#x2F;" rel="noopener" target="_blank">果果的博客</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://zchsakura.github.io/" title="https:&#x2F;&#x2F;zchsakura.github.io" rel="noopener" target="_blank">周小天的博客</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="/linux-command/" title="&#x2F;linux-command&#x2F;">Linux命令查询</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://www.foreverblog.cn/go.html" title="https:&#x2F;&#x2F;www.foreverblog.cn&#x2F;go.html" rel="noopener" target="_blank">虫洞</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://uptime.kezhi.tech/status/web" title="https:&#x2F;&#x2F;uptime.kezhi.tech&#x2F;status&#x2F;web" rel="noopener" target="_blank">网站监控</a>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezhi.tech/en/bbc72bae.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%B0%8F%E5%9F%8B.jpg">
      <meta itemprop="name" content="Yu Zhao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezhi's Blog">
      <meta itemprop="description" content="知识因被记录而产生价值">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Spatial High-pass Filters. | Kezhi's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spatial High-pass Filters.
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-03-30 15:27:33" itemprop="dateCreated datePublished" datetime="2020-03-30T15:27:33+08:00">2020-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-04-20 20:30:12" itemprop="dateModified" datetime="2024-04-20T20:30:12+08:00">2024-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Study/" itemprop="url" rel="index"><span itemprop="name">Study</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-file"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline: </span>
  
    <a title="waline" href="/en/bbc72bae.html#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/en/bbc72bae.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>10 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div class="note info"><p>This is an automatically translated post by LLM. The <a
href="https://kezhi.tech/bbc72bae.html">original post</a> is in Chinese.
If you find any translation errors, please leave a comment to help me
improve the translation. Thanks!</p>
</div>
<p>High-pass filters are often used to enhance images and extract edge
information. They have a wide range of applications in image processing
and image recognition. The main types of high-pass filters are as
follows: unsharp mask, Sobel operator, Laplacian operator, and Canny
algorithm.</p>
<h2 id="unsharp-mask">Unsharp Mask</h2>
<p>This algorithm is often used for image enhancement and is not
commonly used for edge extraction. The implementation method is as
follows:</p>
<ul>
<li>For the original image <span class="math inline">\(f(x,y)\)</span>,
apply Gaussian blur to obtain the smoothed image <span
class="math inline">\(\overline{f(x,y)}\)</span>.</li>
<li>Take the difference between the original image and the smoothed
image to obtain the mask <span
class="math inline">\(g_{mask}(x,y)=f(x,y)-\overline{f(x,y)}\)</span>.</li>
<li>Add the original image and k times the mask to obtain the enhanced
image <span
class="math inline">\(g(x,y)=f(x,y)+k*g_{mask}(x,y)\)</span>.</li>
<li>Generally, the value of k is set to 1 for image enhancement. If k is
greater than 1, it is a high-boost image.</li>
</ul>
<p>The image processing effect of this algorithm is as follows:</p>
<blockquote>
<p>From left to right: original image, obtained mask (normalized to
0-255), enhanced image</p>
</blockquote>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141032.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141251.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141327.bmp">
</center>
</td>
</tr>
</table>
<p>From the results in the above figure, it can be seen that the mask
image has high brightness at the edges and low brightness elsewhere.
After overlaying with the original image, the brightness of the original
image's edges becomes larger. In this case, the method used here is to
normalize the overlaid image as a whole and then multiply it by 255 to
obtain an integer value. Because the brightness of the original image's
edges is large after overlaying with the mask, the bright parts in the
original image become darker after normalization. If another method is
used, such as treating values greater than 255 as 255 and values less
than 0 as 0, it can effectively solve this problem, but the edges of the
image will not be as obvious as the previous method. The specific method
to be used depends on the actual situation.</p>
<h2 id="sobel-operator">Sobel Operator</h2>
<p>The Sobel operator is often used for edge extraction in images. It
uses the first-order derivative of the image to extract edges, which is
denoted as <span class="math inline">\(\nabla f\)</span>.</p>
<p>We know that the gradient of a binary function consists of the
directional derivatives in the x and y directions. The Sobel operator is
the same, with two operators for the x and y directions, respectively,
as follows: <span class="math display">\[
\begin{bmatrix}-1&amp;0&amp;1\\-1&amp;0&amp;2\\-1&amp;0&amp;1\end{bmatrix}
~~~~~~~~~~\begin{bmatrix}-1&amp;-2&amp;-1\\0&amp;0&amp;0\\1&amp;2&amp;1\end{bmatrix}
\]</span></p>
<ul>
<li>Convolve the image with the above two operators separately to obtain
the x-direction and y-direction edges <span
class="math inline">\(G_x\)</span> and <span
class="math inline">\(G_y\)</span>.</li>
<li>The first-order derivative of the image <span
class="math inline">\(G\)</span> can be calculated using <span
class="math inline">\(G_x\)</span> and <span
class="math inline">\(G_y\)</span>, which is <span
class="math inline">\(G=\sqrt{G_x^2+G_y^2}\)</span>. Sometimes, for fast
calculation, <span class="math inline">\(G=|G_x|+|G_y|\)</span> or <span
class="math inline">\(G=max\{|G_x|,|G_y|\}\)</span> can be used.</li>
<li>Normalize G to the range of 0-255 to obtain the Sobel edges of the
image.</li>
</ul>
<blockquote>
<p>From left to right: original image, x-direction edges, y-direction
edges, Sobel edges</p>
</blockquote>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141032.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330143516.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330143622.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330143708.bmp">
</center>
</td>
</tr>
</table>
<p>The Sobel operator performs well in extracting obvious edges in
images and also performs well in extracting detailed edges in images.
This can be illustrated by the processing results of another image:</p>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330144324.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330144413.bmp">
</center>
</td>
</tr>
</table>
<p>It can be seen that even the small edge contours on the chimney are
well represented by the edges extracted by the Sobel operator.</p>
<h2 id="laplacian-operator">Laplacian Operator</h2>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200327172117.bmp">
</center>
</td>
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200327172117.bmp" >
</center>
</td>
</center>
</td>
</tr>
</table>
<p><span class="math display">\[
[f(x+1)-f(x)]-[f(x)-f(x-1)]=f(x+1)+f(x-1)-2f(x)
\]</span> From this, the Laplacian operator can be derived as: <span
class="math display">\[
\begin{bmatrix}0&amp;1&amp;0\\1&amp;-4&amp;1\\0&amp;1&amp;0\end{bmatrix}
\]</span> Sometimes, the second-order derivative in the diagonal
direction is also added, and the operator becomes: <span
class="math display">\[
\begin{bmatrix}1&amp;1&amp;1\\1&amp;-8&amp;1\\1&amp;1&amp;1\end{bmatrix}
\]</span> In practice, the following two operators are often used: <span
class="math display">\[
\begin{bmatrix}0&amp;-1&amp;0\\-1&amp;4&amp;-1\\0&amp;-1&amp;0\end{bmatrix}
\begin{bmatrix}-1&amp;-1&amp;-1\\-1&amp;8&amp;-1\\-1&amp;-1&amp;-1\end{bmatrix}
\]</span></p>
<blockquote>
<p>Assuming that the extracted image edges are <span
class="math inline">\(L(x,y)\)</span>, the algorithm for image
enhancement is <span
class="math inline">\(g(x,y)=f(x,y)+c*L(x,y)\)</span></p>
<p>If the above two operators are used to extract the edges, c=-1; if
the following two operators are used, c=1.</p>
</blockquote>
<p>The image edge information extracted using the Laplacian operator is
as follows:</p>
<blockquote>
<p>From left to right: original image, Laplacian edges without diagonal,
Laplacian edges with diagonal</p>
</blockquote>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141032.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330145641.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330145657.bmp">
</center>
</td>
</tr>
</table>
<p>The edges extracted by the Laplacian operator have two edge lines at
each edge, which is determined by the properties of its second-order
derivative. Compared with the edges extracted by the Sobel operator, the
Laplacian edges are more detailed and capture the "edges of edges". This
can be seen more clearly from the comparison in the following
figure:</p>
<blockquote>
<p>The left side is the result of the Sobel operator, and the right side
is the result of the Laplacian operator</p>
</blockquote>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330144413.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330150103.bmp">
</center>
</td>
</tr>
</table>
<p>For slightly more complex images, the edges extracted by the
Laplacian operator are too detailed, making it difficult to see many
areas clearly, which poses some difficulties for human visual
perception. However, in some image recognition fields, such as using
satellite images to identify ground vehicles, the vehicles on the ground
are often small color blocks, and the Laplacian operator can well
outline the edge contours and some details inside these vehicles. The
Sobel operator is not as effective in capturing these internal details.
At the same time, the property of "edges of edges" makes the edges
extracted by the Laplacian operator suitable for image enhancement.</p>
<h2 id="canny-algorithm">Canny Algorithm</h2>
<p>The Canny algorithm is an optimization of the Sobel edge extraction.
The Sobel operator represents all edges in the final image, regardless
of their strength. This results in many invalid edges being extracted
and displayed in the resulting image. The basic idea of the Canny
algorithm is to filter out these edge information and only keep the
pixels that are most likely to be edges. The implementation method is as
follows:</p>
<ul>
<li>Similar to the Sobel operator, calculate <span
class="math inline">\(G_x\)</span> and <span
class="math inline">\(G_y\)</span>.</li>
<li>Calculate the weight <span
class="math inline">\(weight=\sqrt{G_x^2+G_y^2}\)</span> and the angle
<span class="math inline">\(angle=atan\frac{G_y}{G_x}\)</span> for each
pixel based on <span class="math inline">\(G_x\)</span> and <span
class="math inline">\(G_y\)</span>.</li>
<li>Discretize the angle to the nearest multiple of <span
class="math inline">\(45^o\)</span>.</li>
<li>For each pixel <span class="math inline">\((x,y)\)</span> in the
image, compare its weight <span
class="math inline">\(weight(x,y)\)</span> with the weights of the two
pixels in the <span class="math inline">\(angle(x,y)\)</span> direction
and <span class="math inline">\(-angle(x,y)\)</span> direction. If the
weight of the pixel is not the largest, set it to 0.</li>
<li>Double threshold detection: set upper and lower thresholds for the
brightness of the edges, and perform another filtering on the edges of
the image. Finally, normalize the edge information to the range of
0-255. The thresholds can be manually set.</li>
</ul>
<blockquote>
<p>From left to right: original image, edges without double threshold
detection, edges with lower threshold of 150, edges with lower threshold
of 200</p>
</blockquote>
<table>
<tr>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330141032.bmp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330151754.png?x-oss-process=style/webp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330151852.png?x-oss-process=style/webp">
</center>
</td>
<td>
<center>
<img src="https://download.kezhi.tech/img/20200330151924.png?x-oss-process=style/webp">
</center>
</td>
</tr>
</table>
<h2 id="appendix">Appendix</h2>
<h3 id="references">References</h3>
<p>[1] Rafael C. Gonzalez and Richard E. Woods, "Digital Image
Processing", 3rd Edition, Beijing: Publishing House of Electronics
Industry, 2017.</p>
<p>[2] Brook_icv, "Image Processing Basics (4): Gaussian Filter Detailed
Explanation" [Online]. Available:
https://www.cnblogs.com/wangguchangqing/p/6407717.html#autoid-4-1-0</p>
<p>[3] Naughty Stone 7788121, "Image Edge Detection: Canny Operator,
Prewitt Operator, and Sobel Operator" [Online]. Available:
https://www.jianshu.com/p/bed4ffe996a1</p>
<h3 id="source-code">Source Code</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">sigma=<span class="number">1.5</span>   <span class="comment"># Parameter of the Gaussian filter</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_zeros</span>(<span class="params">img,edge</span>):    <span class="comment"># Add zeros to the edges of the image</span></span><br><span class="line">    shape=img.shape</span><br><span class="line">    temp=np.zeros((shape[<span class="number">0</span>]+<span class="number">2</span>*edge,shape[<span class="number">1</span>]+<span class="number">2</span>*edge))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            temp[i+edge][j+edge]=img[i][j][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,y</span>):     <span class="comment"># Define the 2D Gaussian distribution function</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>/(math.pi*sigma**<span class="number">2</span>)*math.exp(-(x**<span class="number">2</span>+y**<span class="number">2</span>)/(<span class="number">2</span>*sigma**<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gauss</span>(<span class="params">n</span>):   <span class="comment"># Generate an n*n Gaussian filter</span></span><br><span class="line">    mid=n//<span class="number">2</span></span><br><span class="line">    filt=np.zeros((n,n))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            filt[i][j]=f(i-mid,j-mid)/f(-mid,-mid)</span><br><span class="line">    <span class="keyword">return</span> filt.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gauss_filter</span>(<span class="params">img,n</span>):    <span class="comment"># Apply n*n convolutional blocks of Gaussian filtering to the image</span></span><br><span class="line">    filt=gauss(n)</span><br><span class="line">    con=<span class="number">1</span>/np.<span class="built_in">sum</span>(filt)</span><br><span class="line">    shape=img.shape</span><br><span class="line">    temp=add_zeros(img,n//<span class="number">2</span>)</span><br><span class="line">    result=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>],<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            tmp=<span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">                <span class="keyword">for</span> l <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">                    tmp+=filt[k][l]*temp[i+k][j+l]</span><br><span class="line">            result[i][j][<span class="number">0</span>]=con*tmp</span><br><span class="line">    <span class="keyword">return</span> result.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unsharp_mask</span>(<span class="params">img,n,is_mask=<span class="number">0</span></span>):        <span class="comment"># Unsharp mask using n*n Gaussian blur, return the mask if is_mask=1</span></span><br><span class="line">    shape=img.shape</span><br><span class="line">    new_img=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>],<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            new_img[i][j][<span class="number">0</span>]=img[i][j][<span class="number">0</span>]</span><br><span class="line">    mask=new_img-gauss_filter(img,n)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">or</span> j==<span class="number">0</span> <span class="keyword">or</span> i==shape[<span class="number">0</span>]-<span class="number">1</span> <span class="keyword">or</span> j==shape[<span class="number">1</span>]-<span class="number">1</span>:</span><br><span class="line">                mask[i][j][<span class="number">0</span>]=<span class="number">0</span></span><br><span class="line">    result=new_img+mask</span><br><span class="line">    result=result-np.<span class="built_in">min</span>(result)</span><br><span class="line">    result=result/np.<span class="built_in">max</span>(result)*<span class="number">255</span></span><br><span class="line">    mask=mask-np.<span class="built_in">min</span>(mask)</span><br><span class="line">    mask=mask/np.<span class="built_in">max</span>(mask)*<span class="number">255</span></span><br><span class="line">    <span class="keyword">if</span> is_mask:</span><br><span class="line">        <span class="keyword">return</span> mask.astype(np.uint8)</span><br><span class="line">    <span class="keyword">return</span> result.astype(np.uint8)</span><br><span class="line"></span><br><span class="line">sobelx=[[-<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],[-<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>],[-<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>]]</span><br><span class="line">sobely=[[-<span class="number">1</span>,-<span class="number">2</span>,-<span class="number">1</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]]</span><br><span class="line">laplace4=[[<span class="number">0</span>,-<span class="number">1</span>,<span class="number">0</span>],[-<span class="number">1</span>,<span class="number">4</span>,-<span class="number">1</span>],[<span class="number">0</span>,-<span class="number">1</span>,<span class="number">0</span>]]</span><br><span class="line">laplace8=[[-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>],[-<span class="number">1</span>,<span class="number">8</span>,-<span class="number">1</span>],[-<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filt_3</span>(<span class="params">img,filt</span>):          <span class="comment"># Arbitrary 3*3 filter (image, operator)</span></span><br><span class="line">    shape=img.shape</span><br><span class="line">    temp=add_zeros(img,<span class="number">1</span>)</span><br><span class="line">    result=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>],<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            tmp=<span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">                <span class="keyword">for</span> l <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">                    tmp+=filt[k][l]*temp[i+k][j+l]</span><br><span class="line">            result[i][j][<span class="number">0</span>]=tmp</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">laplace_edge</span>(<span class="params">img,filt</span>): <span class="comment"># Laplacian edges after normalization</span></span><br><span class="line">    tmp=filt_3(img,filt)</span><br><span class="line">    tmp=tmp-np.<span class="built_in">min</span>(tmp)</span><br><span class="line">    shape=tmp.shape</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span> (shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">or</span> j==<span class="number">0</span> <span class="keyword">or</span> i==shape[<span class="number">0</span>]-<span class="number">1</span> <span class="keyword">or</span> j==shape[<span class="number">1</span>]-<span class="number">1</span>:</span><br><span class="line">                tmp[i][j][<span class="number">0</span>]=<span class="number">0</span></span><br><span class="line">    tmp=tmp/np.<span class="built_in">max</span>(tmp)*<span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> tmp.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">laplace</span>(<span class="params">img,filt</span>):  <span class="comment"># Overlay of the original image and the Laplacian edges</span></span><br><span class="line">    tmp=filt_3(img,filt)</span><br><span class="line">    shape=img.shape</span><br><span class="line">    result=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            result[i][j]=tmp[i][j][<span class="number">0</span>]+img[i][j][<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">or</span> j==<span class="number">0</span> <span class="keyword">or</span> i==shape[<span class="number">0</span>]-<span class="number">1</span> <span class="keyword">or</span> j==shape[<span class="number">1</span>]-<span class="number">1</span>:</span><br><span class="line">                result[i][j]=<span class="number">0</span></span><br><span class="line">    result-=np.<span class="built_in">min</span>(result)</span><br><span class="line">    result=result/np.<span class="built_in">max</span>(result)*<span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> result.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sobel</span>(<span class="params">img</span>):     <span class="comment"># Extract Sobel edges of the image</span></span><br><span class="line">    shape=img.shape</span><br><span class="line">    sobx=filt_3(img,sobelx)</span><br><span class="line">    soby=filt_3(img,sobely)</span><br><span class="line">    result=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">if</span> i==<span class="number">0</span> <span class="keyword">or</span> j==<span class="number">0</span> <span class="keyword">or</span> i==shape[<span class="number">0</span>]-<span class="number">1</span> <span class="keyword">or</span> j==shape[<span class="number">1</span>]-<span class="number">1</span>:</span><br><span class="line">                result[i][j]=<span class="number">0</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result[i][j]=math.sqrt(sobx[i][j][<span class="number">0</span>]**<span class="number">2</span>+soby[i][j][<span class="number">0</span>]**<span class="number">2</span>)</span><br><span class="line">    result=result/np.<span class="built_in">max</span>(result)*<span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> result.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">canny</span>(<span class="params">img,n=<span class="number">3</span></span>):     <span class="comment"># Extract image edges using the Canny algorithm (blur operation using an n*n Gaussian filter)</span></span><br><span class="line">    de=[[<span class="number">1</span>,<span class="number">0</span>,-<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>,-<span class="number">1</span>,-<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,-<span class="number">1</span>],[-<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,-<span class="number">1</span>]]</span><br><span class="line">    shape=img.shape</span><br><span class="line">    tmp=gauss_filter(img,n)</span><br><span class="line">    sobx=filt_3(tmp,sobelx)</span><br><span class="line">    soby=filt_3(tmp,sobely)</span><br><span class="line">    weight,angle,result=np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>])),np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>])),np.zeros((shape[<span class="number">0</span>],shape[<span class="number">1</span>]))</span><br><span class="line">    angle=angle.astype(np.<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            weight[i][j]=math.sqrt(sobx[i][j][<span class="number">0</span>]**<span class="number">2</span>+soby[i][j][<span class="number">0</span>]**<span class="number">2</span>)</span><br><span class="line">            <span class="keyword">if</span> sobx[i][j][<span class="number">0</span>]:</span><br><span class="line">                angle[i][j]=<span class="built_in">round</span>((math.atan(soby[i][j][<span class="number">0</span>]/sobx[i][j][<span class="number">0</span>])/(math.pi/<span class="number">4</span>)-<span class="number">0.5</span>))%<span class="number">4</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]-<span class="number">2</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]-<span class="number">2</span>):</span><br><span class="line">            tmp_i,tmp_j=i+<span class="number">1</span>,j+<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> weight[tmp_i][tmp_j]&lt;=weight[tmp_i+de[angle[tmp_i][tmp_j]][<span class="number">0</span>]][tmp_j+de[angle[tmp_i][tmp_j]][<span class="number">1</span>]] <span class="keyword">and</span> weight[tmp_i][tmp_j]&lt;=weight[tmp_i+de[angle[tmp_i][tmp_j]][<span class="number">2</span>]][tmp_j+de[angle[tmp_i][tmp_j]][<span class="number">3</span>]]:</span><br><span class="line">                result[tmp_i][tmp_j]=<span class="number">0</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result[tmp_i][tmp_j]=weight[tmp_i][tmp_j]</span><br><span class="line">    result=result/np.<span class="built_in">max</span>(result)*<span class="number">255</span></span><br><span class="line">    mean=np.mean(img)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(shape[<span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">if</span> result[i][j]&lt;<span class="number">100</span>:</span><br><span class="line">                result[i][j]=<span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> result.astype(np.uint8)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">filename=[<span class="string">&quot;test3_corrupt.pgm&quot;</span>,<span class="string">&quot;test4.tif&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> filename:</span><br><span class="line">    img=cv.imread(i)</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;_mask.bmp&quot;</span>,unsharp_mask(img,<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;_unsharp_mask.bmp&quot;</span>,unsharp_mask(img,<span class="number">3</span>))</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;_sobel.bmp&quot;</span>,sobel(img))</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;_canny.bmp&quot;</span>,canny(img,<span class="number">3</span>))</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;laplace4_edge.bmp&quot;</span>,laplace_edge(img,laplace4))</span><br><span class="line">    cv.imwrite(i+<span class="string">&quot;laplace8_edge.bmp&quot;</span>,laplace_edge(img,laplace8))</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/WeChatpay.png" alt="Yu Zhao WeChat Pay">
        <span>WeChat Pay</span>
      </div>
      <div>
        <img src="/images/Alipay.png" alt="Yu Zhao Alipay">
        <span>Alipay</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Yu Zhao
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://kezhi.tech/en/bbc72bae.html" title="Spatial High-pass Filters.">https://kezhi.tech/en/bbc72bae.html</a>
  </li>
  <li class="post-copyright-license">
      <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
              <a href="/tags/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F/" rel="tag"><i class="fa fa-tag"></i> 数字图像</a>
              <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 图像处理</a>
              <a href="/tags/%E7%A9%BA%E5%9F%9F%E6%BB%A4%E6%B3%A2%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 空域滤波器</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/29443507.html" rel="prev" title="数字图像处理（四）空域低通滤波器">
                  <i class="fa fa-angle-left"></i> 数字图像处理（四）空域低通滤波器
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/bbc72bae.html" rel="next" title="数字图像处理（五）空域高通滤波器">
                  数字图像处理（五）空域高通滤波器 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
  <div class="languages">
    <label class="lang-select-label">
      <i class="fa fa-language"></i>
      <span>English</span>
      <i class="fa fa-angle-up" aria-hidden="true"></i>
    </label>
    <select class="lang-select" data-canonical="" aria-label="Select language">
      
        <option value="zh-CN" data-href="/bbc72bae.html" selected="">
          简体中文
        </option>
      
        <option value="en" data-href="/en/bbc72bae.html" selected="">
          English
        </option>
      
    </select>
  </div>

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">陕ICP备20004764号 </a>
      <img src="/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" alt="">
  </div>
  <div class="copyright">
    &copy; 2020 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-user"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Yu Zhao</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">614k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">9:18</span>
  </span>
</div>
<div class="busuanzi-count" style="display: inline">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-file"></i>
      </span>
      <span class="page-pv" title="文章访问量">
        <span id="busuanzi_value_page_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://server.kezhi.tech:8361/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"locale":{"placeholder":"Welcome to comment"},"emoji":["https://unpkg.com/@waline/emojis@1.2.0/weibo","https://unpkg.com/@waline/emojis@1.2.0/alus","https://unpkg.com/@waline/emojis@1.2.0/bilibili","https://unpkg.com/@waline/emojis@1.2.0/qq","https://unpkg.com/@waline/emojis@1.2.0/tieba"],"meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"wordLimit":0,"login":"enable","pageSize":10,"dark":"auto","el":"#waline","comment":true,"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","path":"/en/bbc72bae.html"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/ Relative","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":200,"height":270},"mobile":{"show":false},"react":{"opacityDefault":0.7}});</script></body>
</html>
